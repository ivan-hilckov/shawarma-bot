–®–∞—É—Ä–º–∞ –ë–æ—Ç

–®–∞—É—Ä–º–∞ –ë–æ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ–π Telegram-–±–æ—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ —Ñ–∞—Å—Ç—Ñ—É–¥–∞ (—à–∞—É—Ä–º–∞, –¥–æ–±–∞–≤–∫–∏, –Ω–∞–ø–∏—Ç–∫–∏).

üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚Ä¢ –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: üåØ –®–∞—É—Ä–º–∞ –∏–ª–∏ ü•§ –ù–∞–ø–∏—Ç–∫–∏
‚Ä¢ –í—ã–±–æ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ –º–µ–Ω—é –ø–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–Ω–µ
‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç–æ–ø–ø–∏–Ω–≥–æ–≤
‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–æ—Ä–∑–∏–Ω—ã –∏ –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º—ã
‚Ä¢ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å –≤–≤–æ–¥–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
‚Ä¢ Node.js (>=14)
‚Ä¢ npm –∏–ª–∏ yarn
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ Telegram Bot API (–ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —É @BotFather)

–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä–∫–∞—Å–∞ –ø—Ä–æ–µ–∫—Ç–∞

# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω–µ—ë

mkdir shawarma-bot && cd shawarma-bot

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å npm –∏ TypeScript

npm init -y
npm install typescript ts-node --save-dev
npx tsc --init

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

npm install express dotenv node-telegram-bot-api pg
npm install --save-dev @types/node @types/express @types/node-telegram-bot-api

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

mkdir -p src
cat << 'EOF' > src/index.ts
import './bot';
console.log('–®–∞—É—Ä–º–∞ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω');
EOF

cat << 'EOF' > src/bot.ts
import TelegramBot from 'node-telegram-bot-api';
import dotenv from 'dotenv';
dotenv.config();

const token = process.env.BOT_TOKEN!;
const bot = new TelegramBot(token, { polling: true });

bot.onText(/\/start/, (msg) => {
bot.sendMessage(msg.chat.id, '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –®–∞—É—Ä–º–∞ –ë–æ—Ç! –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:', {
reply_markup: { keyboard: [['üåØ –®–∞—É—Ä–º–∞'], ['ü•§ –ù–∞–ø–∏—Ç–∫–∏']], resize_keyboard: true }
});
});

export default bot;
EOF

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

BOT*TOKEN=<–≤–∞—à*—Ç–æ–∫–µ–Ω>
DATABASE_URL=postgres://user:password@localhost:5432/shawarma

–°–∫—Ä–∏–ø—Ç—ã –≤ package.json

–î–æ–±–∞–≤—å—Ç–µ —Ä–∞–∑–¥–µ–ª scripts:

"scripts": {
"start": "ts-node src/index.ts",
"build": "tsc",
"prod": "node dist/index.js"
}

üõ†Ô∏è –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

npm run start

    ‚Ä¢	–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –æ–±—â–∞–π—Ç–µ—Å—å —Å –Ω–∏–º –≤ Telegram.
    ‚Ä¢	–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤ –∏–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok.

üì¶ –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏ 1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π –∏ –¥–æ–±–∞–≤–æ–∫ 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL 3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∫–æ—Ä–∑–∏–Ω—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ 4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ñ–æ—Ä–º–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∞–¥–º–∏–Ω-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ React

https://core.telegram.org/bots/tutorial
