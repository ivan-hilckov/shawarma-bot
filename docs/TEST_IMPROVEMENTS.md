# üß™ –£–ª—É—á—à–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –∏ —É–ª—É—á—à–µ–Ω–∏–π

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:

- **–¢–µ—Å—Ç—ã:** 154 —Ç–µ—Å—Ç–∞
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** 46.7% –æ–±—â–µ–µ
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã:**
  - `rateLimiter.ts` - 0% –ø–æ–∫—Ä—ã—Ç–∏—è
  - `services/index.ts` - 0% –ø–æ–∫—Ä—ã—Ç–∏—è
  - `handlers.ts` - —Ç–æ–ª—å–∫–æ 22% –ø–æ–∫—Ä—ã—Ç–∏—è
  - `bot.ts` - 0% –ø–æ–∫—Ä—ã—Ç–∏—è

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:

- **–¢–µ—Å—Ç—ã:** 581 —Ç–µ—Å—Ç–æ–≤ (+427 —Ç–µ—Å—Ç–æ–≤)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** 79.2% –æ–±—â–µ–µ (+32.5%)
- **–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
  - `rateLimiter.ts` - 100% –ø–æ–∫—Ä—ã—Ç–∏—è ‚úÖ
  - `services/index.ts` - 100% –ø–æ–∫—Ä—ã—Ç–∏—è ‚úÖ
  - `handlers.ts` - 84.17% –ø–æ–∫—Ä—ã—Ç–∏—è ‚úÖ **–ö–†–£–ü–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï**
  - `middleware/` - 100% –ø–æ–∫—Ä—ã—Ç–∏—è ‚úÖ
  - `logger.ts` - 100% –ø–æ–∫—Ä—ã—Ç–∏—è ‚úÖ
  - `orders.ts` - 100% –ø–æ–∫—Ä—ã—Ç–∏—è ‚úÖ **–ù–û–í–û–ï**
  - `bot.ts` - 100% statements, 96.55% branches, 71.42% functions ‚úÖ **–ö–†–£–ü–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï**

## üîß –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 1. RateLimiter Tests (`__tests__/rateLimiter.test.ts`)

**–ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã:** 25 —Ç–µ—Å—Ç–æ–≤
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 100%

**–ö–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –°–±—Ä–æ—Å –ª–∏–º–∏—Ç–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ Edge cases (–Ω—É–ª–µ–≤–æ–π –ª–∏–º–∏—Ç, –±–æ–ª—å—à–∏–µ ID)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 2. ServiceRegistry Tests (`__tests__/services.test.ts`)

**–ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã:** 20 —Ç–µ—Å—Ç–æ–≤
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 100%

**–ö–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ó–∞–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 3. Async Handlers Tests (`__tests__/handlers-async.test.ts`)

**–ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã:** 28 —Ç–µ—Å—Ç–æ–≤
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** Handlers 57.5%

**–ö–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
- ‚úÖ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### 4. Logger Tests (`__tests__/unit/logger.test.ts`)

**–ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã:** 41 —Ç–µ—Å—Ç
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 100%

**–ö–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

- ‚úÖ LogLevel enum –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ Logger –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (–≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã)
- ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (error, warn, info, debug)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—è–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ timestamp
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ metadata (–≤–∫–ª—é—á–∞—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏)
- ‚úÖ Child logger —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ createLogger —Ñ—É–Ω–∫—Ü–∏—è
- ‚úÖ NODE_ENV –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ Edge cases (–¥–ª–∏–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã, –ø—É—Å—Ç–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç)

### 5. Orders API Tests (`__tests__/api/orders.test.ts`) **–ù–û–í–û–ï**

**–ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã:** 22 —Ç–µ—Å—Ç–∞
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 100%

**–ö–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

- ‚úÖ **Route Registration:** –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ç—Ä–µ—Ö endpoints
- ‚úÖ **Authentication Middleware:** –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API key –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ **GET /orders:** —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ **GET /orders/:id:** –≤–∞–ª–∏–¥–∞—Ü–∏—è ID, 404 handling, —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- ‚úÖ **GET /orders/stats:** –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ **Error Handling:** –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö catch –±–ª–æ–∫–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 145-147, 264-271, 338-340)
- ‚úÖ **Service Integration:** —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OrderService –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è:**

- üõ†Ô∏è **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã** —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ setupJest.ts –º–æ–∫–æ–≤
- üîß **–†–µ—à–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–æ–∫–æ–≤** –º–µ–∂–¥—É –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –º–æ–∫–∞–º–∏
- üìù **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ error cases** –¥–ª—è catch –±–ª–æ–∫–æ–≤
- ‚ö° **–ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** (0.252s) –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π

### 6. Bot.ts Comprehensive Tests (`__tests__/unit/bot.test.ts`) **–ö–†–£–ü–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï**

**–ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã:** 43 —Ç–µ—Å—Ç–∞ (–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç —Ñ–∞–π–ª)
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 100% statements, 96.55% branches, 71.42% functions

### 7. Handlers.ts Extended Tests (`__tests__/handlers-extended.test.ts`) **–ù–û–í–û–ï –ö–†–£–ü–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï**

**–ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã:** 34 —Ç–µ—Å—Ç–∞ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª —Ç–µ—Å—Ç–æ–≤)
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 84.17% statements (+26.63%), 76.17% branches (+33.62%), 40% functions (+10.4%)

**–î–æ —É–ª—É—á—à–µ–Ω–∏–π handlers.ts:**

- Statements: 57.54%
- Branches: 42.55%
- Functions: 29.6% ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –ù–ò–ó–ö–û**
- Lines: 57.69%

**–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π handlers.ts:**

- Statements: **84.17%** ‚úÖ (+26.63%)
- Branches: **76.17%** ‚úÖ (+33.62%)
- Functions: **40%** ‚úÖ (+10.4%)
- Lines: **84.15%** ‚úÖ (+26.46%)

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫—Ä—ã—Ç—ã–µ –æ–±–ª–∞—Å—Ç–∏:**

- ‚úÖ **Helper Functions:** getItemQuantityInCart, createItemKeyboard —Å –ø–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º edge cases
- ‚úÖ **Profile Handlers:** handleProfile —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, callback/message —Ä–µ–∂–∏–º–æ–≤
- ‚úÖ **Navigation Handlers:** handleBackToShawarma, handleBackToDrinks —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- ‚úÖ **Item Screen Operations:** handleIncreaseFromItem, handleDecreaseFromItem —Å –∞—Ç–æ–º–∞—Ä–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- ‚úÖ **Quick Operations:** handleQuickAdd, handleQuickIncrease, handleQuickDecrease –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
- ‚úÖ **Error Handling:** –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö error cases –∏ edge cases
- ‚úÖ **API Integration:** —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å botApiClient –∏ databaseService

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è:**

- üîß **–õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–∫–∏:** –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ —Å–æ–≥–ª–∞—Å–Ω–æ MOCKING_STRATEGY.md
- üìù **Default export –º–æ–∫–∏:** –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ api-client –∏ database –∫–∞–∫ default exports
- üõ†Ô∏è **Edge cases coverage:** —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –æ—à–∏–±–æ–∫ API, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚ö° **–ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:** 1.127s –¥–ª—è 85 —Ç–µ—Å—Ç–æ–≤ (–±—ã–ª–æ 51) - –æ—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- üéØ **Comprehensive coverage:** –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –Ω–µ–ø–æ–∫—Ä—ã—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ –∞–Ω–∞–ª–∏–∑–∞

**–î–æ —É–ª—É—á—à–µ–Ω–∏–π:**

- Statements: 67.25%
- Branches: 62.06%
- Functions: 28.57% ‚ö†Ô∏è
- Lines: 67.25%

**–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:**

- Statements: **100%** ‚úÖ (+32.75%)
- Branches: **96.55%** ‚úÖ (+34.49%)
- Functions: **71.42%** ‚úÖ (+42.85%)
- Lines: **100%** ‚úÖ (+32.75%)

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫—Ä—ã—Ç—ã–µ –æ–±–ª–∞—Å—Ç–∏:**

- ‚úÖ **Token Validation:** –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ–≥–æ/–Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ —Å process.exit()
- ‚úÖ **Bot Initialization:** —Å–æ–∑–¥–∞–Ω–∏–µ TelegramBot, NotificationService, serviceRegistry
- ‚úÖ **Service Registration:** –ø–æ–ª–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ **Event Handlers Registration:** onText, on('message'), on('callback_query'), on('polling_error')
- ‚úÖ **Command Handler:** /start –∫–æ–º–∞–Ω–¥–∞ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ **Message Routing:** –≤—Å–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π (—à–∞—É—Ä–º–∞, –Ω–∞–ø–∏—Ç–∫–∏, –ø—Ä–æ—Ñ–∏–ª—å, –∫–æ—Ä–∑–∏–Ω–∞, –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ)
- ‚úÖ **Callback Query Routing:** 20+ —Ç–∏–ø–æ–≤ callback handlers
  - item*, add_to_cart*, view*cart, increase*, decrease*, remove*, clear_cart
  - checkout, profile, my*orders, admin*, navigation callbacks
  - quantity\_ —Å async –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏ error handling
- ‚úÖ **Error Handling:** callback errors, polling errors gracefully handled
- ‚úÖ **Bot Info Initialization:** —É—Å–ø–µ—à–Ω—ã–π –∏ –Ω–µ—É–¥–∞—á–Ω—ã–π bot.getMe()
- ‚úÖ **Graceful Shutdown:** SIGINT –∏ SIGTERM –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è:**

- üîß **–õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–∫–∏:** –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ —Å–æ–≥–ª–∞—Å–Ω–æ MOCKING_STRATEGY.md
- üìù **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç:** bot.ts –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∫–æ–≤
- üõ†Ô∏è **Process mocking:** –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ process.exit, console.log/error –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
- ‚ö° **Async testing:** –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ async operations —Å timeout
- üîí **TypeScript safety:** —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö mock functions

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

### Rate Limiting

- **–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞:** –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π –ª–∏–º–∏—Ç–æ–≤
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –í–∞–ª–∏–¥–∞—Ü–∏—è

- **100% –ø–æ–∫—Ä—ã—Ç–∏–µ** –≤—Å–µ—Ö –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ ID** —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ñ–æ—Ä–º–∞—Ç–∞
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞** —Ç–æ–≤–∞—Ä–æ–≤

### Dependency Injection

- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–µ—Ä–≤–∏—Å–æ–≤
- **–õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ –º–æ–∫–∏
- **–ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

| –ú–æ–¥—É–ª—å              | –ü–æ–∫—Ä—ã—Ç–∏–µ | –¢–µ—Å—Ç—ã | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å                |
| ------------------- | -------- | ----- | ----------- | --------------------- |
| `bot.ts`            | 100%     | 43    | üî¥ –í—ã—Å–æ–∫–∞—è  | **–ö–†–£–ü–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï** |
| `rateLimiter.ts`    | 100%     | 25    | üî¥ –í—ã—Å–æ–∫–∞—è  | ‚úÖ                    |
| `validation.ts`     | 100%     | 18    | üî¥ –í—ã—Å–æ–∫–∞—è  | ‚úÖ                    |
| `logger.ts`         | 100%     | 41    | üî¥ –í—ã—Å–æ–∫–∞—è  | ‚úÖ                    |
| `orders.ts`         | 100%     | 22    | üî¥ –í—ã—Å–æ–∫–∞—è  | **–ù–û–í–û–ï**             |
| `services/index.ts` | 100%     | 20    | üü° –°—Ä–µ–¥–Ω—è—è  | ‚úÖ                    |
| `handlers.ts`       | 84.17%   | 62    | üî¥ –í—ã—Å–æ–∫–∞—è  | **–ö–†–£–ü–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï** |
| `database.ts`       | 90.5%    | 15    | üî¥ –í—ã—Å–æ–∫–∞—è  | ‚úÖ                    |
| `cart.ts`           | 93.3%    | 12    | üü° –°—Ä–µ–¥–Ω—è—è  | ‚úÖ                    |
| `notifications.ts`  | 93.6%    | 8     | üü° –°—Ä–µ–¥–Ω—è—è  | ‚úÖ                    |

## üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è **–ù–û–í–û–ï**

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∑–∞–≤–∏—Å–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç—ã `orders.test.ts` –∑–∞–≤–∏—Å–∞–ª–∏ –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∞–ª–∏—Å—å

**–ü—Ä–∏—á–∏–Ω—ã:**

- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –º–æ–∫–∞–º–∏ –≤ setupJest.ts –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –º–æ–∫–∞–º–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü—Ä–æ–±–ª–µ–º—ã —Å database plugin –º–æ–∫–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:**

- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ–º setupJest.ts –º–æ–∫–∏** –≤–º–µ—Å—Ç–æ –∏—Ö –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è FastifyPluginAsync** (fastify, options)
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –º–æ–∫–∏ OrderService** –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ **–ü–æ–∫—Ä—ã—Ç–∏–µ error cases** —á–µ—Ä–µ–∑ mock.mockRejectedValue()

### API Routes –ø–æ–∫—Ä—ã—Ç–∏–µ **–£–õ–£–ß–®–ï–ù–û**

**–î–æ:** API Routes –æ–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ ~40%
**–ü–æ—Å–ª–µ:** API Routes –æ–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ 76.61% (+36.61%)

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ñ–∞–π–ª–∞–º:**

- `orders.ts`: 39.13% ‚Üí **100%** (+60.87%)
- `menu.ts`: —É–ª—É—á—à–µ–Ω –¥–æ 83.33%
- `health.ts`: —É–ª—É—á—à–µ–Ω –¥–æ 73.68%
- `cart.ts`: —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (61.72%)

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)

- [x] ~~–¢–µ—Å—Ç—ã –¥–ª—è `bot.ts` (–≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª)~~ ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û** - 100% –ø–æ–∫—Ä—ã—Ç–∏–µ
- [ ] –£–ª—É—á—à–µ–Ω–∏–µ `handlers.ts` –ø–æ–∫—Ä—ã—Ç–∏—è (—Ç–µ–∫—É—â–µ–µ 57.5% ‚Üí —Ü–µ–ª—å 85%+)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- [ ] E2E —Ç–µ—Å—Ç—ã —Å Telegram API

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ)

- [ ] Performance —Ç–µ—Å—Ç—ã –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
- [ ] –¢–µ—Å—Ç—ã –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∫—Ä—ã—Ç–∏—è –≤ CI/CD
- [ ] –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è API Services

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ)

- [ ] Snapshot —Ç–µ—Å—Ç—ã –¥–ª—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] Mutation —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã –ø–æ–∫—Ä—ã—Ç–∏—è

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —É–ª—É—á—à–µ–Ω–æ —Å **46.7%** –¥–æ **79.2%** (+32.5%) üöÄ
–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∫—Ä—ã—Ç—ã –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ.
–î–æ–±–∞–≤–ª–µ–Ω–æ **427 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**, –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞—é—â–∏—Ö –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞.

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**

- ü§ñ **Bot.ts** - –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ 100% statements –ø–æ–∫—Ä—ã—Ç–∏–µ (—Å 67.25%) - **–ö–†–£–ü–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï**
- üéõÔ∏è **Handlers.ts** - –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ 84.17% –ø–æ–∫—Ä—ã—Ç–∏–µ (—Å 57.54%) - **–ö–†–£–ü–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï**
- üéØ **Orders.ts** - –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ 100% –ø–æ–∫—Ä—ã—Ç–∏–µ (—Å 39.13%)
- üõ°Ô∏è **API –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- üìù **581 –æ–±—â–∏—Ö —Ç–µ—Å—Ç–æ–≤** (–±—ã–ª–æ 154) - —Ä–æ—Å—Ç –Ω–∞ 377%
- üîß **–†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–≤–∏—Å–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤** –Ω–∞–≤—Å–µ–≥–¥–∞
- ‚ö° **–ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** (<2s –¥–ª—è 581 —Ç–µ—Å—Ç–æ–≤) - –æ—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è** - —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ MOCKING_STRATEGY.md

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:**

- `bot.ts`: 67.25% ‚Üí **100%** statements (+32.75%)
- `handlers.ts`: 57.54% ‚Üí **84.17%** statements (+26.63%)
- `orders.ts`: 39.13% ‚Üí **100%** (+60.87%)
- `rateLimiter.ts`: 0% ‚Üí **100%** (+100%)
- `logger.ts`: 0% ‚Üí **100%** (+100%)

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** ‚úÖ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è
